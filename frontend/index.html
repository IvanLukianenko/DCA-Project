<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>DCA Smart Contract Frontend</title>
    <script language="javascript" type="text/javascript"
        src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/web3@1.3.5/dist/web3.min.js"></script>
    <script src="scripts/dca_abi.js"></script>
</head>

<body>
    <script>
        let dcaContract;
        let userAccount;

        function startApp() {
            let dcaContractAddress = "SAMPLE_ADDRESS";
            dcaContract = new web3js.eth.Contract(dcaABI, dcaContractAddress);

            let accountInterval = setInterval(function () {
                // Check if account has changed
                if (web3.eth.accounts[0] !== userAccount) {
                    userAccount = web3.eth.accounts[0];
                    // Call a function to update the UI with the new account
                    getZombiesByOwner(userAccount)
                        .then(displayZombies);
                }
            }, 100);
        }
        window.addEventListener('load', function () {

            // Checking if Web3 has been injected by the browser (Mist/MetaMask)
            if (typeof web3 !== 'undefined') {
                // Use Mist/MetaMask's provider
                web3js = new Web3(web3.currentProvider);
            } else {
                web3js = new Web3('https://eth-mainnet.g.alchemy.com/v2/XlcB-KDrP-0VXj3KQjDXx-cLRVfpsv0o');
                // Handle the case where the user doesn't have Metamask installed
                // Probably show them a message prompting them to install Metamask
            }

            // Now you can start your app & access web3 freely:
            startApp()

        });
    </script>
    <script src="scripts/app.js"></script>
    <h1>DCA Smart Contract Interaction</h1>

    <button onclick="deposit()">Deposit</button>
    <br>
    <label for="amount">Amount:</label>
    <input type="text" id="amount" placeholder="Enter amount">
    <br>
    <button onclick="setDcaParams()">Set DCA Parameters</button>
    <br>
    <label for="ethAmount">ETH Amount:</label>
    <input type="text" id="ethAmount" placeholder="Enter ETH amount">
    <br>
    <label for="interval">Interval (seconds):</label>
    <input type="text" id="interval" placeholder="Enter interval">
    <br>
    <button onclick="executeDca()">Execute DCA</button>

</body>

</html>